DROP DATABASE IF EXISTS DB_ASMA;
CREATE DATABASE DB_ASMA;
USE DB_ASMA;

CREATE TABLE TB_USUARIOS (
	USU_CODIGO INT AUTO_INCREMENT PRIMARY KEY,
	USU_NOME VARCHAR(50) NOT NULL,
	USU_EMAIL VARCHAR(50) NOT NULL,
    	USU_USUARIO VARCHAR(50) NOT NULL,
	USU_SENHA VARCHAR(50) NOT NULL,
    	USU_CPF VARCHAR(20) NOT NULL,
    	USU_TELEFONE VARCHAR(20),
    	USU_FOTO VARCHAR(200) NOT NULL,
    	USU_SITUACAO BOOLEAN NOT NULL
) ENGINE=InnoDB;

CREATE TABLE TB_USUARIOSMASTER (
	USM_CODIGO INT AUTO_INCREMENT PRIMARY KEY,
	USM_USU_CODIGO INT REFERENCES TB_USUARIOS(USU_CODIGO)
) ENGINE=InnoDB;

CREATE TABLE TB_ESTADOS (
	EST_CODIGO INT AUTO_INCREMENT PRIMARY KEY,
    	EST_SIGLA VARCHAR(2) NOT NULL,
	EST_NOME VARCHAR(50) NOT NULL
) ENGINE=InnoDB;
INSERT INTO TB_ESTADOS (EST_SIGLA, EST_NOME) VALUES ('RN','Rio Grande do Norte');

CREATE TABLE TB_CIDADES (
	CID_CODIGO INT AUTO_INCREMENT PRIMARY KEY,
    	CID_NOME VARCHAR(50) NOT NULL,
    	CID_EST_CODIGO INT REFERENCES TB_ESTADOS(EST_CODIGO)
) ENGINE=InnoDB;
INSERT INTO TB_CIDADES (CID_NOME, CID_EST_CODIGO) VALUES ('Cruzeta',1);
INSERT INTO TB_CIDADES (CID_NOME, CID_EST_CODIGO) VALUES ('Caicó',1);
INSERT INTO TB_CIDADES (CID_NOME, CID_EST_CODIGO) VALUES ('Jucurutu',1);
INSERT INTO TB_CIDADES (CID_NOME, CID_EST_CODIGO) VALUES ('Jardim de Piranhas',1);

CREATE TABLE TB_MOTOS (
	MOT_CODIGO INT AUTO_INCREMENT PRIMARY KEY,
	MOT_PLACA VARCHAR(20) NOT NULL,
    	MOT_MODELO VARCHAR(50) NOT NULL,
    	MOT_COR VARCHAR(20) NOT NULL,
    	MOT_PESO VARCHAR(20) NOT NULL,
    	MOT_MOTOR INT NOT NULL,
    	MOT_POTENCIA VARCHAR(20) NOT NULL,
    	MOT_ALTURABANCO VARCHAR(20) NOT NULL,
    	MOT_ANO INT NOT NULL,
    	MOT_IPVA DOUBLE NOT NULL,
    	MOT_DPVAT DOUBLE NOT NULL,
    	MOT_DIARIA DOUBLE NOT NULL,
    	MOT_FIMDESEMANA DOUBLE NOT NULL,
    	MOT_IMAGEM VARCHAR(200) NOT NULL,
    	MOT_ESTADO INT NOT NULL,
    	MOT_CID_CODIGO INT REFERENCES TB_CIDADES(CID_CODIGO)
) ENGINE=InnoDB;

CREATE TABLE TB_ALUGACOES (
	ALG_CODIGO INT AUTO_INCREMENT PRIMARY KEY,
    	ALG_DATAINICIO DATE NOT NULL,
    	ALG_DATAFIM DATE NOT NULL,
    	ALG_MOT_CODIGO INT,
    	ALG_USU_CODIGO INT,
    	ALG_VALOR DOUBLE NOT NULL,
    	ALG_VERIFICA BOOLEAN NOT NULL,
    	FOREIGN KEY (ALG_MOT_CODIGO) REFERENCES TB_MOTOS(MOT_CODIGO),
    	FOREIGN KEY (ALG_USU_CODIGO) REFERENCES TB_USUARIOS(USU_CODIGO)
) ENGINE=InnoDB;

-- MOTOS PADRAO
INSERT INTO TB_MOTOS (MOT_PLACA, MOT_MODELO, MOT_COR, MOT_ANO, MOT_IPVA, MOT_DPVAT, MOT_DIARIA, MOT_IMAGEM, MOT_ESTADO, MOT_CID_CODIGO, MOT_MOTOR, MOT_POTENCIA, MOT_ALTURABANCO, MOT_PESO, MOT_FIMDESEMANA) 
VALUES ('40028924', 'Honda CB300R', 'Amarela', 2002, 1000, 500, 350, 'assets/img/motos/moto1.png', 1, 1, 900, '50 cv A 60 cv', '750 mm a 790 mm', '190 kg a 215 kg', 900.50);
INSERT INTO TB_MOTOS (MOT_PLACA, MOT_MODELO, MOT_COR, MOT_ANO, MOT_IPVA, MOT_DPVAT, MOT_DIARIA, MOT_IMAGEM, MOT_ESTADO, MOT_CID_CODIGO, MOT_MOTOR, MOT_POTENCIA, MOT_ALTURABANCO, MOT_PESO, MOT_FIMDESEMANA) 
VALUES ('40028924', 'Suzuki GW250', 'Azul', 2002, 1000, 500, 400, 'assets/img/motos/moto2.png', 1, 2, 900, '50 cv A 60 cv', '750 mm a 790 mm', '190 kg a 215 kg', 1000.00);

-- USUARIO MASTER PADRÃO
INSERT INTO TB_USUARIOS (USU_NOME, USU_USUARIO, USU_EMAIL, USU_CPF, USU_TELEFONE, USU_SENHA, USU_FOTO, USU_SITUACAO)
VALUES ('admin', 'admin', 'admin448@asma.com', '820.430.915-28', '(22) 3427-3559', 'admin123', 'assets/img/usuarios/admin.png', 1);
INSERT INTO TB_USUARIOSMASTER (USM_USU_CODIGO) VALUES (1);
